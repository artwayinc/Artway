"use client";

import { useState, useEffect } from "react";
import { usePathname } from "next/navigation";
import Link from "next/link";

const navItems = [
  { href: "/", label: "Home" },
  { href: "/services", label: "Services" },
  { href: "/schedule", label: "Schedule" },
  { href: "/clients-and-projects", label: "Clients & Projects" },
  { href: "/quote-request", label: "Quote Request" },
];

export default function SiteHeader() {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const pathname = usePathname();

  useEffect(() => {
    const handleResize = () => {
      if (window.innerWidth > 768) {
        setIsMobileMenuOpen(false);
      }
    };

    window.addEventListener("resize", handleResize);
    return () => window.removeEventListener("resize", handleResize);
  }, []);

  useEffect(() => {
    if (isMobileMenuOpen) {
      document.body.style.overflow = "hidden";
    } else {
      document.body.style.overflow = "";
    }
    return () => {
      document.body.style.overflow = "";
    };
  }, [isMobileMenuOpen]);

  const toggleMobileMenu = () => {
    setIsMobileMenuOpen(!isMobileMenuOpen);
  };

  const closeMobileMenu = () => {
    setIsMobileMenuOpen(false);
  };

  return (
    <header className="header">
      <div className="container header__inner">
        <Link href="/" className="logo" aria-label="Artway home">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="160"
            height="26"
            viewBox="0 0 1536 251"
            className="logo__svg"
          >
            <path
              d="M 224.00 226.50 L 37.00 226.50 L 29.50 223.00 L 26.50 217.00 L 26.50 34.00 L 33.00 25.50 L 224.00 24.50 L 233.50 30.00 L 235.50 35.00 L 235.50 217.00 L 229.00 225.50 L 224.00 226.50 Z M 99.50 175.00 L 99.50 87.00 L 108.00 85.50 L 108.50 80.00 L 86.50 49.00 L 81.00 47.50 L 57.50 81.00 L 58.00 85.50 L 66.50 87.00 L 66.50 174.00 L 68.00 175.50 L 99.50 175.00 Z M 194.50 175.00 L 195.50 86.00 L 204.00 85.50 L 204.50 81.00 L 181.50 48.00 L 177.00 47.50 L 152.50 81.00 L 153.00 85.50 L 161.00 85.50 L 162.50 88.00 L 162.50 175.00 L 194.50 175.00 Z M 203.50 206.00 L 203.00 187.50 L 59.00 187.50 L 57.50 189.00 L 59.00 206.50 L 203.50 206.00 Z"
              fill="#c02f3b"
              fillRule="evenodd"
            />
            <path
              d="M 240.00 231.50 L 22.00 231.50 L 21.50 20.00 L 240.00 19.50 L 240.00 231.50 Z M 226.50 226.00 L 233.50 221.00 L 235.50 216.00 L 235.50 35.00 L 233.50 30.00 L 225.00 24.50 L 37.00 24.50 L 32.00 26.50 L 26.50 34.00 L 27.50 220.00 L 36.00 226.50 L 226.50 226.00 Z M 99.00 175.50 L 66.50 175.00 L 66.50 86.00 L 54.50 85.00 L 83.00 45.50 L 111.50 84.00 L 111.00 85.50 L 101.00 85.50 L 99.50 87.00 L 99.00 175.50 Z M 194.00 175.50 L 162.50 175.00 L 162.50 87.00 L 161.00 85.50 L 150.50 85.00 L 178.00 45.50 L 183.50 51.00 L 207.50 85.00 L 195.50 86.00 L 195.50 174.00 L 194.00 175.50 Z M 203.00 206.50 L 59.00 206.50 L 57.50 205.00 L 57.50 189.00 L 59.00 187.50 L 203.00 187.50 L 203.00 206.50 Z"
              fill="#ffffff"
              fillRule="evenodd"
            />
            <path
              d="M 437.00 224.50 L 418.00 222.50 L 399.50 214.00 L 393.50 189.00 L 385.50 173.00 L 384.50 163.00 L 378.50 154.00 L 370.50 126.00 L 367.50 122.00 L 363.50 98.00 L 349.50 67.00 L 341.50 56.00 L 338.50 40.00 L 341.50 31.00 L 347.00 24.50 L 360.00 26.50 L 383.00 24.50 L 395.50 38.00 L 396.50 48.00 L 402.50 60.00 L 413.50 102.00 L 418.50 110.00 L 420.50 122.00 L 428.50 136.00 L 433.50 164.00 L 448.50 191.00 L 452.50 205.00 L 448.50 217.00 L 437.00 224.50 Z M 1287.00 224.50 L 1267.00 222.50 L 1248.50 214.00 L 1242.50 188.00 L 1235.50 175.00 L 1233.50 163.00 L 1227.50 153.00 L 1220.50 128.00 L 1216.50 121.00 L 1211.50 95.00 L 1199.50 68.00 L 1190.50 55.00 L 1188.50 37.00 L 1196.00 24.50 L 1210.00 26.50 L 1232.00 24.50 L 1244.50 37.00 L 1245.50 47.00 L 1252.50 62.00 L 1263.50 104.00 L 1267.50 109.00 L 1270.50 124.00 L 1277.50 135.00 L 1282.50 163.00 L 1287.50 175.00 L 1297.50 190.00 L 1298.50 199.00 L 1301.50 204.00 L 1298.50 216.00 L 1287.00 224.50 Z M 498.00 224.50 L 485.00 220.50 L 482.50 212.00 L 482.50 150.00 L 483.50 118.00 L 485.50 113.00 L 485.50 53.00 L 483.50 42.00 L 493.00 25.50 L 529.00 25.50 L 532.50 28.00 L 536.50 37.00 L 533.50 59.00 L 532.50 106.00 L 532.50 181.00 L 536.50 205.00 L 534.50 213.00 L 530.00 218.50 L 510.00 220.50 L 498.00 224.50 Z M 634.00 224.50 L 594.00 220.50 L 548.50 153.00 L 548.50 138.00 L 551.50 129.00 L 552.50 111.00 L 558.00 105.50 L 569.00 106.50 L 578.00 102.50 L 582.50 97.00 L 585.50 88.00 L 585.00 79.50 L 569.00 75.50 L 554.00 74.50 L 546.50 62.00 L 544.50 55.00 L 545.50 40.00 L 556.00 25.50 L 596.00 27.50 L 616.00 33.50 L 637.50 66.00 L 638.50 91.00 L 634.50 111.00 L 629.50 124.00 L 620.00 139.50 L 610.00 141.50 L 603.50 146.00 L 605.50 155.00 L 613.50 169.00 L 630.50 186.00 L 640.50 200.00 L 644.50 216.00 L 640.00 221.50 L 634.00 224.50 Z M 684.00 84.50 L 677.50 83.00 L 672.50 64.00 L 672.50 49.00 L 675.50 38.00 L 680.00 29.50 L 699.00 29.50 L 711.00 25.50 L 715.50 34.00 L 718.50 47.00 L 716.50 82.00 L 699.00 81.50 L 684.00 84.50 Z M 736.00 224.50 L 731.00 224.50 L 725.50 220.00 L 721.50 203.00 L 724.50 176.00 L 723.50 142.00 L 725.50 138.00 L 729.50 80.00 L 729.50 66.00 L 725.50 45.00 L 727.50 32.00 L 736.00 25.50 L 752.00 28.50 L 771.00 27.50 L 775.50 32.00 L 776.50 46.00 L 773.50 113.00 L 771.50 117.00 L 773.50 215.00 L 764.00 221.50 L 748.00 220.50 L 736.00 224.50 Z M 956.00 223.50 L 916.00 219.50 L 907.50 207.00 L 904.50 168.00 L 892.50 147.00 L 890.50 137.00 L 869.50 89.00 L 864.50 68.00 L 859.50 59.00 L 861.50 40.00 L 871.00 25.50 L 882.00 28.50 L 906.00 27.50 L 908.50 31.00 L 926.50 87.00 L 927.50 99.00 L 942.50 135.00 L 949.50 168.00 L 964.50 198.00 L 963.50 208.00 L 956.00 223.50 Z M 1468.00 120.50 L 1462.00 120.50 L 1457.50 115.00 L 1447.50 91.00 L 1435.50 76.00 L 1435.50 69.00 L 1446.50 55.00 L 1453.50 40.00 L 1470.00 25.50 L 1480.00 27.50 L 1506.00 25.50 L 1514.50 35.00 L 1513.50 48.00 L 1485.50 90.00 L 1472.50 118.00 L 1468.00 120.50 Z M 1435.00 225.50 L 1395.00 224.50 L 1388.50 213.00 L 1392.50 146.00 L 1387.50 135.00 L 1377.50 122.00 L 1370.50 106.00 L 1357.50 89.00 L 1344.50 63.00 L 1334.50 53.00 L 1331.50 47.00 L 1335.50 35.00 L 1343.00 26.50 L 1363.00 27.50 L 1388.00 33.50 L 1400.50 59.00 L 1408.50 69.00 L 1417.50 88.00 L 1424.50 97.00 L 1435.50 120.00 L 1440.50 124.00 L 1446.50 140.00 L 1446.50 152.00 L 1443.50 164.00 L 1444.50 202.00 L 1443.50 212.00 L 1435.00 225.50 Z M 815.00 84.50 L 809.00 82.50 L 790.00 82.50 L 788.50 80.00 L 786.50 74.00 L 788.50 49.00 L 786.50 34.00 L 793.00 27.50 L 803.00 30.50 L 823.00 29.50 L 825.50 33.00 L 828.50 47.00 L 827.50 62.00 L 821.50 77.00 L 815.00 84.50 Z M 1023.00 221.50 L 995.00 219.50 L 983.50 201.00 L 981.50 184.00 L 972.50 164.00 L 963.50 123.00 L 956.50 103.00 L 951.50 96.00 L 947.50 81.00 L 939.50 66.00 L 941.50 47.00 L 951.00 27.50 L 966.00 30.50 L 985.00 30.50 L 988.50 33.00 L 995.50 47.00 L 995.50 65.00 L 1008.50 96.00 L 1012.50 116.00 L 1020.50 130.00 L 1023.50 147.00 L 1029.50 157.00 L 1032.50 170.00 L 1046.50 203.00 L 1044.00 217.50 L 1023.00 221.50 Z M 1060.00 169.50 L 1053.50 166.00 L 1049.50 150.00 L 1040.50 133.00 L 1040.50 128.00 L 1032.50 110.00 L 1027.50 89.00 L 1033.50 74.00 L 1040.50 37.00 L 1046.00 29.50 L 1078.00 30.50 L 1089.00 28.50 L 1096.50 39.00 L 1094.50 51.00 L 1089.50 68.00 L 1081.50 85.00 L 1076.50 111.00 L 1067.50 137.00 L 1060.00 169.50 Z M 316.00 224.50 L 299.00 220.50 L 276.00 219.50 L 270.50 207.00 L 294.50 137.00 L 305.50 115.00 L 306.50 107.00 L 312.50 99.00 L 316.50 81.00 L 327.50 61.00 L 330.00 60.50 L 334.50 64.00 L 335.50 74.00 L 341.50 88.00 L 341.50 95.00 L 350.50 110.00 L 349.50 120.00 L 340.50 146.00 L 365.50 148.00 L 370.50 155.00 L 381.50 188.00 L 372.00 198.50 L 353.00 193.50 L 333.00 193.50 L 326.50 206.00 L 322.50 220.00 L 316.00 224.50 Z M 1166.00 224.50 L 1148.00 220.50 L 1126.00 219.50 L 1122.50 217.00 L 1119.50 208.00 L 1143.50 138.00 L 1155.50 113.00 L 1155.50 108.00 L 1161.50 99.00 L 1162.50 84.00 L 1176.50 61.00 L 1179.00 60.50 L 1183.50 64.00 L 1185.50 77.00 L 1191.50 89.00 L 1191.50 97.00 L 1199.50 110.00 L 1199.50 117.00 L 1190.50 146.00 L 1215.50 149.00 L 1227.50 175.00 L 1230.50 188.00 L 1222.00 198.50 L 1203.00 193.50 L 1182.00 193.50 L 1171.50 221.00 L 1166.00 224.50 Z"
              fill="currentColor"
              fillRule="evenodd"
            />
          </svg>
        </Link>
        <nav className="nav" aria-label="Main navigation">
          {navItems.map((item) => {
            const isActive =
              pathname === item.href ||
              (item.href !== "/" && pathname.startsWith(item.href));
            return (
              <Link
                key={item.href}
                href={item.href}
                className={`nav__link ${isActive ? "nav__link--active" : ""}`}
              >
                {item.label}
              </Link>
            );
          })}
        </nav>
        <div className="header__actions">
          <a
            className="header__phone"
            href="tel:+17182136886"
            aria-label="Call +1 718 213 6886"
            title="+1 718 213 6886"
          >
            <svg
              width="22"
              height="22"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            >
              <path d="M22 16.9v3a2 2 0 0 1-2.2 2A19.8 19.8 0 0 1 3.1 5.2 2 2 0 0 1 5.1 3h3a2 2 0 0 1 2 1.7c.1.9.3 1.8.6 2.7a2 2 0 0 1-.5 2.1L9 10.9a16 16 0 0 0 4.1 4.1l1.4-1.2a2 2 0 0 1 2.1-.5c.9.3 1.8.5 2.7.6a2 2 0 0 1 1.7 2z" />
            </svg>
          </a>
          <button
            className="burger-button"
            onClick={toggleMobileMenu}
            aria-label="Toggle mobile menu"
            aria-expanded={isMobileMenuOpen}
            type="button"
          >
            <span className="burger-button__line"></span>
            <span className="burger-button__line"></span>
            <span className="burger-button__line"></span>
          </button>
        </div>
        {isMobileMenuOpen && (
          <div className="mobile-menu-overlay" onClick={closeMobileMenu}></div>
        )}
        <nav
          className={`mobile-menu ${isMobileMenuOpen ? "mobile-menu--open" : ""}`}
          aria-label="Mobile navigation"
        >
          {navItems.map((item) => {
            const isActive =
              pathname === item.href ||
              (item.href !== "/" && pathname.startsWith(item.href));
            return (
              <Link
                key={item.href}
                href={item.href}
                className={`mobile-menu__link ${isActive ? "mobile-menu__link--active" : ""}`}
                onClick={closeMobileMenu}
              >
                {item.label}
              </Link>
            );
          })}
        </nav>
      </div>
    </header>
  );
}
